:root{
  --bg:#0f1115; --panel:#151820; --text:#e7e8ea; --muted:#a9adb7;
  --accent:#7aa2ff; --ok:#4bd38a; --warn:#ffcc66; --danger:#ff6b6b; --alt:#ff9e64;
}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--text);font:14px/1.4 system-ui,Segoe UI,Roboto,Helvetica,Arial}
.app{max-width:1100px;margin:0 auto;padding:16px}
header{display:flex;align-items:center;gap:12px}
header h1{margin:0;font-size:22px}
header p{margin:0;color:var(--muted)}

main{display:grid;grid-template-columns: 1fr 1fr; gap:16px; margin-top:12px}
.left, .right{background:var(--panel);border-radius:12px;padding:12px;box-shadow:0 2px 12px rgba(0,0,0,.25)}
canvas{width:100%;height:auto;border-radius:8px;background:#0b0d12;display:block}
.legend{display:flex;gap:10px;flex-wrap:wrap;margin-top:8px;color:var(--muted);align-items:center}
.chip{display:inline-block;width:14px;height:14px;border-radius:3px;margin-right:4px}
.chip-empty{background:#2b2f3b}
.chip-obs{background:#5b6275}
.chip-haz{background:#cc7a00}
.chip-start{background:var(--ok)}
.chip-goal{background:var(--danger)}
.chip-path{background:var(--accent)}
.chip-ctrf{background:var(--alt)}
.hint{margin-top:6px;color:var(--muted)}

.controls{display:flex;flex-direction:column;gap:10px}
.row{display:flex;gap:8px;flex-wrap:wrap}
button{background:#222734;color:var(--text);border:1px solid #2f3646;padding:8px 10px;border-radius:8px;cursor:pointer}
button:hover{background:#283043}
button.primary{background:var(--accent);border-color:transparent;color:#0a0c12}
.sliders{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.slide{background:#1a1f2b;border:1px solid #2a3141;padding:8px;border-radius:8px}
.slide label{display:flex;justify-content:space-between;color:var(--muted);margin-bottom:6px}
input[type=range]{width:100%}

.explain{margin-top:8px;background:#1a1f2b;border:1px solid #2a3141;border-radius:8px;padding:10px}
.explain h3{margin:0 0 6px 0}
#explain-text{color:var(--text);margin-bottom:8px}
.bars{display:flex;gap:6px}
.bar{flex:1;background:#23293a;border-radius:6px;padding:6px}
.bar .name{color:var(--muted);font-size:12px}
.bar .value{font-weight:600}

#metrics{margin-top:8px;color:var(--muted)}
footer{margin-top:12px;color:var(--muted);text-align:center}
